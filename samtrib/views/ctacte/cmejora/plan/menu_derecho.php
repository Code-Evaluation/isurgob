<?phpuse yii\helpers\Html;use yii\bootstrap\Modal;use app\utils\db\utb;use yii\widgets\ActiveForm;?><?php//modal de busqueda reducidaModal::begin([	'id' => 'opcBuscar',	'header' => '<div class="clearfix"><h2 class="pull-left">Buscar Plan</h2></div>',	'toggleButton' => false,    'closeButton' => [          'label' => '<b style="font-family:Helvetica Neue, Helvetica, Arial, sans-serif;">X</b>',          'class' => 'btn btn-danger btn-sm pull-right',        ],    'size' => 'modal-sm',	]);	echo $this->render('buscar', ['selectorModal' => '#opcBuscar']);Modal::end();?><ul class="menu_derecho" id="ulMenuDer">	<?php if (utb::getExisteProceso(3390)){ ?>		<li id='liBuscar' class='glyphicon glyphicon-search'> <?= Html::a('<b>Buscar</b>', null, ['class' => 'bt-buscar-label', 'data-toggle' => 'modal', 'data-target' => '#opcBuscar', 'style' => 'cursor:pointer;']); ?></li>		<li><hr style="color: #ddd; margin:1px" /></li>	<?php } ?>	<?php if (utb::getExisteProceso(3392)){ ?>		<li id='liNuevo' class='glyphicon glyphicon-plus'> <?= Html::a('<b>Nuevo</b>', ['index', 'consulta' => 0], ['class' => 'bt-buscar-label']) ?></li>		<li id='liModificar' class='glyphicon glyphicon-pencil'> <?= Html::a('<b>Modificar</b>', ['index', 'consulta' => 3, 'id' => $model->plan_id], ['class' => 'bt-buscar-label']) ?></li>		<li id='liEliminar' class='glyphicon glyphicon-trash'> <?= Html::a('<b>Eliminar</b>', ['index', 'consulta' => 2, 'id' => $model->plan_id], ['class' => 'bt-buscar-label']) ?></li>		<li><hr style="color: #ddd; margin:1px" /></li>	<?php } ?>	<?php if (utb::getExisteProceso(3390)){ ?>		<li id='liVencimiento' class='glyphicon glyphicon-calendar'> <?= Html::a('<b>Vencimiento</b>', ['index', 'consulta' => 6, 'id' => $model->plan_id], ['class' => 'bt-buscar-label']) ?></li>	<?php } ?>	<?php if (utb::getExisteProceso(3393)){ ?>		<li id='liACtaCte' class='glyphicon glyphicon-usd'> <?= Html::a('<b>A CtaCte</b>', ['index', 'consulta' => 4, 'id' => $model->plan_id], ['class' => 'bt-buscar-label']) ?></li>	<?php } ?>	<?php if (utb::getExisteProceso(3395)){ ?>		<li id='liDesafectar' class='glyphicon glyphicon-link'> <?= Html::a('<b>Desafectar</b>', ['index', 'consulta' => 5, 'id' => $model->plan_id], ['class' => 'bt-buscar-label']) ?></li>	<?php } ?>	<?php if (utb::getExisteProceso(3390) or utb::getExisteProceso(3393) or utb::getExisteProceso(3395)){ ?>		<li><hr style="color: #ddd; margin:1px" /></li>	<?php } ?>	<?php if (utb::getExisteProceso(3300)){ ?>		<li id='liCtaCte' class='glyphicon glyphicon-usd'> <?= Html::a('<b>CtaCte</b>', ['//ctacte/ctacte/index', 'obj_id' => $model->obj_id], ['class' => 'bt-buscar-label']) ?></li>	<br>	<?php } ?>	<?php if (utb::getExisteProceso(3390)){ ?>		<li id='liMisc' class='glyphicon glyphicon-comment'> <?= Html::a('<b>Misc</b>', ['objeto/objeto/miscelaneas', 'id' => $model->obj_id], ['class' => 'bt-buscar-label']) ?></li>	<?php } ?>	<?php if (utb::getExisteProceso(3300) or utb::getExisteProceso(3390)){ ?>		<li><hr style="color: #ddd; margin:1px" /></li>	<?php } ?>	<?php if (utb::getExisteProceso(3390)){ ?>		<li id='liContrato' class='glyphicon glyphicon-print'> <?= Html::a('<b>Contrato</b>', ['imprimircontrato', 'id'=>$model->plan_id], ['class' => 'bt-buscar-label', 'data-pjax' => "0"]) ?></li>		<li id='liResumen' class='glyphicon glyphicon-print'> <?= Html::a('<b>Resumen</b>', ['imprimirresumen', 'id'=>$model->plan_id], ['class' => 'bt-buscar-label','target'=>'_black']) ?></li>		<li id='liComprobante' class='glyphicon glyphicon-print'> 		<?php			Modal::begin([    		'id' => 'opcImprimirComprob',			'header' => '<h2 style="font-family:Helvetica Neue, Helvetica, Arial, sans-serif;">Impresión de Chequeras</h2>',			'toggleButton' => [                    'label' => '<b>Comprobante</b>',                    'class' => 'bt-buscar-label',                    'style' => 'text-align:left;width:80px'],            'closeButton' => [                  'label' => '<b style="font-family:Helvetica Neue, Helvetica, Arial, sans-serif;">X</b>',                  'class' => 'btn btn-danger btn-sm pull-right',                ],            'size' => 'modal-sm',			]);				$form = ActiveForm::begin(['action' => ['imprimircomprobantevalida', 'id' => $model->plan_id],'id' => 'formPlanImpComp',	    								'fieldConfig' => [	        										'template' => "{label}\n<div class=\"col-lg-3\">{input}</div>",	        										],	        						]);				echo "<div style='font-family:Helvetica Neue, Helvetica, Arial, sans-serif; padding:10px 20px; color:#000; font-size:12px'>";	        	echo "<p><label>Cuota Desde:</label>&nbsp;".Html::input('text', 'txCtaDesde', null, ['class' => 'form-control','id'=>'txCtaDesde','maxlength'=>'3', 'style'=>'width:40px;'])."</p>";	        	echo "<p><label>Cuota Hasta:</label>&nbsp;".Html::input('text', 'txCtaHasta', null, ['class' => 'form-control','id'=>'txCtaHasta','maxlength'=>'3', 'style'=>'width:40px;'])."</p>";	        				echo Html::Button('Imprimir', ['class' => 'btn btn-success','id' => 'btImpComp', 'onclick' => 'btImpCompClick()', 'style' => 'color:#fff !important']);	        	echo "&nbsp;&nbsp;";				echo Html::Button('Cancelar',['class' => 'btn btn-primary','onClick' => '$("#opcImprimirComprob, .window").modal("toggle");']);								echo '<br><br><div id="errorplanimpcomp" style="display:none;overflow:hidden" class="alert alert-danger alert-dismissable"></div>';								echo "</div>";				ActiveForm::end();			Modal::end();		?>	</li>		<li id='liAlternativas' class='glyphicon glyphicon-share-alt'> <?= Html::a('<b>Alternativas</b>', ['//ctacte/mejoraalternativa/index', 'plan' => $model->plan_id], ['class' => 'bt-buscar-label']) ?></li>		<li><hr style="color: #ddd; margin:1px" /></li>	<?php } ?>	<?php if (utb::getExisteProceso(3391)){ ?>		<li id='liObras' class='glyphicon glyphicon-wrench'> <?= Html::a('<b>Obras</b>', ['//ctacte/mejoraobra/listado'], ['class' => 'bt-buscar-label']) ?></li>	<?php } ?>	<?php if (utb::getExisteProceso(3390)){ ?>		<li id='liListado' class='glyphicon glyphicon-list-alt'> <?= Html::a('<b>Listado</b>', ['//ctacte/listadocmejoraplan'], ['class' => 'bt-buscar-label']) ?></li>		<li id='liEstadistica' class='glyphicon glyphicon-stats' style='display:none'> <?= Html::a('<b>Estad&iacute;stica</b>', null, ['class' => 'bt-buscar-label']) ?></li>	<?php } ?></ul><script type="text/javascript">$("#ulMenuDer").css("pointer-events", "none");$("#ulMenuDer li").css("color", "#ccc");$("#ulMenuDer li a").css("color", "#ccc");<?phpif($consulta === 1){?>//habilito buscar y nuevo$("#liBuscar").css("pointer-events", "all");$("#liBuscar a").css("color", "#337ab7");$("#liBuscar").css("color", "#337ab7");$("#liNuevo").css("pointer-events", "all");$("#liNuevo a").css("color", "#337ab7");$("#liNuevo").css("color", "#337ab7");<?php}?><?phpif($consulta === 1 && $model->est !== 'B'){?>$("#liObras").css("pointer-events", "all");$("#liObras a").css("color", "#337ab7");$("#liObras").css("color", "#337ab7");$("#liListado").css("pointer-events", "all");$("#liListado a").css("color", "#337ab7");$("#liListado").css("color", "#337ab7");$("#liEstadistica").css("pointer-events", "all");$("#liEstadistica a").css("color", "#337ab7");$("#liEstadistica").css("color", "#337ab7");<?php//la opcion de vencimiento se habilita si esl estado de la cuenta corriente es 'D' => 'deuda'if($model->estadocc === 'D'){?>$("#liVencimiento").css("pointer-events", "all");$("#liVencimiento a").css("color", "#337ab7");$("#liVencimiento").css("color", "#337ab7");<?php}?><?php//la opcion de ACuentaCorriente y Alternativas se habilita solamente si el estado del plan es 'A' => 'activo'if($model->est === 'A'){?>$("#liACtaCte").css("pointer-events", "all");$("#liACtaCte a").css("color", "#337ab7");$("#liACtaCte").css("color", "#337ab7"); $("#liAlternativas").css("pointer-events", "all");$("#liAlternativas a").css("color", "#337ab7");$("#liAlternativas").css("color", "#337ab7"); <?php}?><?php}?>	<?phpif($model->obj_id !== null && $consulta === 1 && $model->est !== 'B'){?>$("#liCtaCte").css("pointer-events", "all");$("#liCtaCte a").css("color", "#337ab7");$("#liCtaCte").css("color", "#337ab7");$("#liMisc").css("pointer-events", "all");$("#liMisc a").css("color", "#337ab7");$("#liMisc").css("color", "#337ab7");<?php}?>	<?phpif($model->plan_id > 0){		$estado = $model->est;	?>		<?php	if($estado !== 'A'){	?>	$("#liACtaCte").css("pointer-events", "none");	$("#liACtaCte li").css("color", "#ccc");	$("#liACtaCte li a").css("color", "#ccc");	<?php	}	?>		<?php	if($consulta === 1){	?>				<?php		if(in_array($estado, ['A', 'L'])){		?>		$("#liModificar").css("pointer-events", "all");		$("#liModificar a").css("color", "#337ab7");		$("#liModificar").css("color", "#337ab7");				$("#liEliminar").css("pointer-events", "all");		$("#liEliminar a").css("color", "#337ab7");		$("#liEliminar").css("color", "#337ab7");		<?php		}		?>			<?php	}	?>		<?php	if($estado === 'A' && $consulta === 1){	?>			$("#liEliminar").css("pointer-events", "all");	$("#liEliminar a").css("color", "#337ab7");	$("#liEliminar").css("color", "#337ab7");	<?php	} else if($estado === 'L' && $consulta === 1){	?>	$("#liDesafectar").css("pointer-events", "all");	$("#liDesafectar a").css("color", "#337ab7");	$("#liDesafectar").css("color", "#337ab7");	<?php	}	?>		<?php	if($consulta === 1){		?>		$("#liContrato").css("pointer-events", "all");		$("#liContrato a").css("color", "#337ab7");		$("#liContrato").css("color", "#337ab7");				$("#liResumen").css("pointer-events", "all");		$("#liResumen a").css("color", "#337ab7");		$("#liResumen").css("color", "#337ab7");				$("#liComprobante").css("pointer-events", "all");		$("#liComprobante a").css("color", "#337ab7");		$("#liComprobante").css("color", "#337ab7");				<?php	}	?><?php}?>function btImpCompClick(){	error = "";	if ($("#txCtaDesde").val() == "") error += "Ingrese la Cuota Desde<br>";	if ($("#txCtaHasta").val() == "") error += "Ingrese la Cuota Hasta<br>";	if (parseInt($("#txCtaDesde").val()) > parseInt($("#txCtaHasta").val())) error += "Rango de cuotas mal ingresado";		if (error == '')	{		$("#formPlanImpComp").submit();		$("#opcImprimirComprob, .window").modal("toggle");	}else {		$("#errorplanimpcomp").html(error);		$("#errorplanimpcomp").css("display", "block");	}}</script>